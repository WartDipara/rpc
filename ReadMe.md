# RPC 框架
### 什麽是RPC？
RPC（Remote Procedure Call，遠程過程調用）是一種網絡進行進程之間的通信協議。RPC允許調用遠程網絡終端的服務，就像調用本地服務一樣。
### 爲什麽要用RPC？
RPC允許一個程序（稱之爲 **服務消費者**）像調用自身方法一樣，調用另一個程序（稱之爲 **服務提供者**）所提供的接口方法，而不需要瞭解數據的傳輸處理過程、底層網絡通信的細節等。<br>
假設：A 提供order服務，而 B 需要調用order服務完成下單。<br>
B調用A提供的order服務接口，僞代碼如下:
```java
interface OrderService {
  // @return 訂單編號
  int order(param_1, param_2, ...);
}
```
如果沒有rpc框架，則情況會複雜很多，需要完成接口請求的拼接。
```java
url ="http://systemcall.com";
req = new Req(param_1, param_2, ...);
res = httpClient.post(url).body(req).execute();
orderId = res.data.orderId;
```
有了rpc框架則可以簡化成:
```java
orderId = OrderService.order(param_1, param_2, ...);
```
## 架構實現
核心思想是對所有web服務的代理。基於這個思想，構建rpc框架的重點在於**注册中心**和**代理**。<br>
+ **注册中心**：
    + 消費者要如何知道提供者給了什麽服務？當然是需要提供者將自己的服務上傳到注冊中心來讓消費者知道了。
    + 有了注冊中心后，消費者又要如何得到提供者給的接口？這就需要用到**代理**來獲取了。
+ **代理**：
    + 代理是消費者發起調用的途徑，有兩種代理的方法，分別是 靜態代理和動態代理。
    + 靜態代理：為每一個特定類型的接口都實現一個代理類，其靈活性自然較差，在RPC框架中更傾向於另一種代理模式。
    + 動態代理：根據需要的對象的類型，自動生成一個代理對象。常用的代理模式有JDK代理和CGLIB代理。（JDK代理針對接口，但是性能更快）
    + 靜態代理由消費者實現，而動態代理則是由RPC框架來實現。
